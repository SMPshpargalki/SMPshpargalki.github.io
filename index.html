<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>СМП Шпаргалки</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <h1>СМП Шпаргалки</h1>

  <div class="container">
    <!-- Главные кнопки -->
    <button class="main-btn" onclick="toggleSection('templates')">Шаблоны карт вызовов</button>
    <button class="main-btn" onclick="toggleSection('cheats')">Шпаргалки</button>
    <button class="main-btn" onclick="toggleSection('thankYou')">Сказать спасибо</button>
  </div>

  <!-- Секция: Шаблоны карт вызовов (список разделов) -->
  <div id="templates" class="panel subsections" style="display: none;">
    <button class="sub-btn" onclick="toggleSection('obstetrics')">Акушерство и гинекология</button>
    <button class="sub-btn">Анестезиология и реанимация</button>
    <button class="sub-btn">Инфекционные заболевания</button>
    <button class="sub-btn">Кардиология</button>
    <button class="sub-btn">Констатация</button>
    <button class="sub-btn">Неврология</button>
    <button class="sub-btn">Оториноларингология</button>
    <button class="sub-btn">Офтальмология</button>
    <button class="sub-btn">Педиатрия</button>
    <button class="sub-btn">Стоматология</button>
    <button class="sub-btn">Терапия</button>
    <button class="sub-btn">Токсикология</button>
    <button class="sub-btn">Травматология</button>
    <button class="sub-btn">Урология</button>
    <button class="sub-btn">Хирургия</button>
    <button class="sub-btn">Прочее</button>
  </div>

  <!-- Подраздел: Акушерство и гинекология (список тем) -->
  <div id="obstetrics" class="panel subsections" style="display: none;">
    <button class="leaf-btn" onclick="toggleSection('period1')">1 период родов</button>
    <button class="leaf-btn">Абсцесс бартолиновой железы</button>
    <button class="leaf-btn">Альгоменорея</button>
    <button class="leaf-btn">Апоплексия яичника</button>
    <button class="leaf-btn">Бартолинит</button>
    <button class="leaf-btn">Вагинит</button>
    <button class="leaf-btn">Внематочная беременность</button>
    <button class="leaf-btn">Выпадение матки</button>
    <button class="leaf-btn">Дисфункциональные маточное кровотечение (ДМК)</button>
    <button class="leaf-btn">Инородное тело влагалища</button>
    <button class="leaf-btn">Кровотечение в постменопаузе</button>
    <button class="leaf-btn">Лактостаз</button>
    <button class="leaf-btn">Мастит гнойный</button>
    <button class="leaf-btn">Мастит негнойный</button>
    <button class="leaf-btn">Неполный медицинский аборт</button>
    <button class="leaf-btn">Неразвивающаяся беременность</button>
    <button class="leaf-btn">Несостоятельность рубца на матке</button>
    <button class="leaf-btn">Перекрут кисты яичника</button>
    <button class="leaf-btn">Преждевременная отслойка плаценты</button>
    <button class="leaf-btn">Преэкламсия</button>
    <button class="leaf-btn">Разрыв околоплодных оболочек</button>
    <button class="leaf-btn">Роды в машине (ребенок)</button>
    <button class="leaf-btn">Роды в машине (роженица)</button>
    <button class="leaf-btn">Сальпингоофорит</button>
    <button class="leaf-btn">Самопроизвольный аборт</button>
    <button class="leaf-btn">Угрожающий аборт</button>
    <button class="leaf-btn">Угроза преждевременных родов</button>
    <button class="leaf-btn">Чрезмерная рвота</button>
    <button class="leaf-btn">Эндометрит</button>
  </div>

  <!-- Контент для "1 период родов" -->
  <div id="period1" class="panel content" style="display: none;">
    <div class="text-block">
1 период родов — описание (пример):
• Определение: длительность от начала регулярной родовой деятельности до полного раскрытия шейки матки.
• Действия: наблюдение за состоянием матери, мониторинг сердцебиения плода, контроль кровотечения.
• Перечень вмешательств: при необходимости — окситоцин, обезболивание, подготовка к переводу в РД.
(Здесь можно вставить ваш подробный текст с переносами — они будут сохраняться.)
    </div>
  </div>

  <!-- Секция: Шпаргалки -->
  <div id="cheats" class="panel subsections" style="display: none;">
    <button class="leaf-btn">Беспризорный</button>
    <button class="leaf-btn">Гололед</button>
    <button class="leaf-btn">Детские дозы</button>
    <button class="leaf-btn">Диагноза нет в алгоритмах</button>
    <button class="leaf-btn">Не получилось снять ЭКГ</button>
    <button class="leaf-btn">Описание молочных желез</button>
    <button class="leaf-btn">Описание родничка</button>
    <button class="leaf-btn">Описание урапидила</button>
    <button class="leaf-btn">Расчет кислорода</button>
    <button class="leaf-btn">Реанимация если один</button>
    <button class="leaf-btn">Реанимация если вдвоем</button>
    <button class="leaf-btn">Сыпь (локальный статус)</button>
  </div>

  <!-- Секция: Текст "спасибо" -->
  <div id="thankYou" class="panel content" style="display: none;">
    <div class="text-block">
Спасибо! Ваш вклад важен — благодарим за поддержку проекта.
    </div>
  </div>

<script>
/*
 toggleSection(id)
 - показывает/скрывает панель с данным id
 - при показе: скрывает все панели, кроме:
    * сам target
    * всех его предков (чтобы дерево видно)
    * прямых детей target показываются только если target открыт
 - при показе также скрываются все .content (тексты), кроме target если target является content
*/
function toggleSection(id) {
  const target = document.getElementById(id);
  const panels = document.querySelectorAll('.panel');

  // если таргета нет — выход
  if (!target) return;

  // определим текущее состояние таргета (видим или скрыт)
  const willShow = target.style.display === 'none' || target.style.display === '';

  panels.forEach(p => {
    // если p === target — обработаем ниже
    if (p === target) return;

    // если p является предком target -> оставляем видимым (чтобы путь к target был виден)
    if (p.contains(target)) {
      p.style.display = 'block';
      return;
    }

    // если p является непосредственным дочерним блоком target (показывать/скрывать вместе с target)
    if (target.contains(p) && p.parentElement === target) {
      // покажем дочерние панели только если target будет видим
      p.style.display = willShow ? 'none' : 'none'; // при переключении дочерние скрываем, потом откроем целенаправленно
      return;
    }

    // все остальные панели закрываем
    p.style.display = 'none';
  });

  // Скрываем все текстовые блоки (контент) при любом переключении,
  // они откроются только если target === конкретный content
  document.querySelectorAll('.content').forEach(c => c.style.display = 'none');

  // Теперь переключим сам target: если собираемся показать - покажем, иначе скроем
  if (willShow) {
    // Показываем target
    target.style.display = 'block';

    // Если у target есть прямые дочерние панели (subsections), и target — это секция (не content),
    // то оставляем их скрытыми — пользователь будет нажимать на соответствующие кнопки чтобы раскрыть.
    // Если target — content, то показываем его (мы уже сделали)
  } else {
    target.style.display = 'none';
  }

  // Особая логика: если target — раздел (subsections) и мы его открыли,
  // то убедимся что его прямые дочерние элементы (панели), если есть, остаются скрытыы — так текст не показывается автоматически.
  // (ничего больше делать не нужно — мы скрыли content выше)
}
</script>
</body>
</html>
